<div class="form-group" *ngIf="selectedAccount">

  <div *ngIf="cliente">

    <div class="form-group">
      <h2>Associar Conta Blockchain ao e-CNPJ</h2>
    </div>

    <div class="conteudo form-group" >
      <div class="row">
        <div class="col-md-12 col-sm-12">
          <p>Dados Cadastrais</p>
        </div>

        <div class="form-group col-md-4 col-sm-4">
          <label>Informe o CNPJ:</label>
          <input name="cnpjWithMask" [(ngModel)]="cliente.cnpjWithMask"  class="form-control form-control-sm" (input)="changeCnpj()" 
          [textMask]="{mask: maskCnpj}" required [disabled]="this.flagUploadConcluido" />
        </div>

        <div class="form-group col-md-6 col-sm-6" *ngIf="cliente.dadosCadastrais">
          <label>Razão Social:</label>
          <input name="razaoSocial" class="form-control form-control-sm" [(ngModel)]="cliente.dadosCadastrais.razaoSocial" readonly  disabled/>
        </div>

      </div>
    </div>

    <div class="conteudo form-group" *ngIf="cliente.dadosCadastrais" >

      <div class="row">
        <div class="col-md-12 col-sm-12">
          <p>Associação entre Conta Blockchain e Cadastro</p>
        </div>
      </div> 
      <div class="row">
        <div class="form-group col-md-10 col-sm-10">
          <label>Selecione a conta blockchain desejada no Metamask. A conta deve aparecer no estado "Disponível".</label>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-5 col-sm-5">                  
          <input name="contaBlockchain" class="form-control form-control-sm" type="text" [ngModel]="selectedAccount" readonly
            disabled size="45">
          <div class="msg-conta-invalida" >
            {{contaEstaValida}}
          </div>
        </div>
      </div>
    
    </div>
    
    <div class="conteudo form-group" *ngIf="cliente.dadosCadastrais" >

        <div class="row">
          <div class="form-group col-md-12 col-sm-12">
            <p>Procedimento de Declaração</p>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-10 col-sm-10 ">
              <label>1. Antes de começar, certifique-se que você tem o <b>Adobe Reader</b> instalado em sua máquina. Caso não tenha, clique <a target="_blank" href="https://get2.adobe.com/br/reader/">aqui</a> para instalar</label>
              <br>              
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-10 col-sm-10">
            <label>2. Clique <a target="_blank" href="{{fileHandleService.getCaminhoRoteiroAssinaturaDigital()}}">aqui</a> para ler o <b>Roteiro de Instruções</b> para essa etapa. </label>
          </div>
        </div>  
        <div class="row">
          <div class="form-group col-md-10 col-sm-10">
            <label>3. Clique no botão abaixo para <b>salvar localmente</b> a Declaração de Propriedade e Responsabilidade sobre Conta Blockchain, e abrir com o Adobe Reader.</label>            
            <button type="button" placement="bottom" ngbTooltip="Baixar declaracao" (click)="createPdf()">
              <i class="fa fa-floppy-o" aria-hidden="true"></i> Baixar declaração
            </button>
          </div>
        </div>     
        
        <div class="row">
          <div class="form-group col-md-10 col-sm-10">
            <label>4. Seguindo as instruções do Roteiro, <b>assine a declaração digitalmente com seu e-CNPJ</b> conectado ao computador. </label>
          </div>
        </div>  

        

        <div class="row">                 
          <div class="form-group col-md-10 col-sm-10">
            <label>5. Clique no botão abaixo para <b>fazer upload do PDF</b> da Declaração assinado digitalmente. </label>
          </div>
          <div class="form-group col-md-10 col-sm-10">
              <input ng2FileSelect id="arquivo" type="file" accept=".pdf" [uploader]="this.fileHandleService.uploader" (change)="this.fileHandleService.chamaUpload()" /> 
              <div class="msg-hash-declaracao" *ngIf="hashdeclaracao">
                Hash da Declaração: {{hashdeclaracao}}
              </div>
          </div>              
        </div>    

    </div>

    <div class="conteudo form-group" *ngIf="cliente.dadosCadastrais" >
         

    <div class="form-group" >
      <div class="row">
        <div class="form-group col-md-12 col-sm-12">
          <p>Gravação na Blockchain</p>
        </div>
      </div>      

      <button type="button" class="btn btn-success btn-cabecalho" placement="bottom" ngbTooltip="Enviar" (click)="associarContaCliente()">
        <i class="fa fa-floppy-o" aria-hidden="true"></i> Enviar
      </button>

      <button type="button" class="btn btn-outline-success btn-cabecalho" placement="bottom" ngbTooltip="Cancelar" (click)="cancelar()">
        Cancelar
      </button>
    </div>

  </div>
  
</div>


<app-metamsg *ngIf="!selectedAccount"></app-metamsg>
